<!DOCTYPE html>
<head>
	<meta charset='utf-8'>
	<script src="bower_components/jquery/dist/jquery.js"></script>
	<script src="bower_components/jquery.hotkeys/jquery.hotkeys.js"></script>
	<script src="bower_components/jquery-ui/jquery-ui.js"></script>
	<script src="bower_components/underscore/underscore.js"></script>
	<link rel="stylesheet" href="//code.jquery.com/ui/1.11.2/themes/smoothness/jquery-ui.css">
	<style>
		.field-folder {
			color: blue;
		}
		.field-horizon {
			color: #008080;
		}
	</style>
</head>
<body unresolved>
	<div id="main">
		Headers: <input id="headers" type="text" value="folder">
		Order by: <input id="order" type="text" value="created">
		Query: <input id="query" type="text" value="">
		<input id = "btnList" type="submit" value="List"/>
		<br>
		Pages:
		<input id = "btnPageProjects" type="submit" value="Projects"/>
		<input id = "btnPageMustdos" type="submit" value="Mustdos"/>
		|
		<input id = "btnPageInbox" type="submit" value="Inbox"/>
		<input id = "btnPageToday" type="submit" value="Today"/>
		<input id = "btnPageNext" type="submit" value="Next"/>
		<input id = "btnPageWeek" type="submit" value="Week"/>
		<input id = "btnPageMonth" type="submit" value="Month"/>
		<input id = "btnPageQuarter" type="submit" value="Quarter"/>
		<input id = "btnPageYear" type="submit" value="Year"/>
		<br>
		<ul id="list"></ul>
	</div>

	<div id="dialog-form" title="Mark items as closed" style="display: none">
		<p>Enter the item IDs you would like to close.</p>
		<form>
			<fieldset>
				<label for="closeList">Items:</label>
				<input name=closeList" id="closeList" type="text" value="">
				<input type="submit" tabindex="-1" value="Close" style="position: absolute; top: -1000px"/>
			</fieldset>
		</form>
	</div>

	<script src="main.js"></script>

	<script type="text/javascript">
		var dialog, form;

		function runList(h, o, q) {
			return function () {
				$("#headers").val(h);
				$("#order").val(o);
				$("#query").val(q);
				doList();
			};
		}
		$(document).ready(function(){
			$("#btnList").click(function(){ doList(); });
			$("#btnPageProjects").click(runList("folder", "horizon,created", ""));
			$("#btnPageMustdos").click(runList("horizon,folder", "created", '[["->", "tag", "mustdo"]]'));
			$("#btnPageInbox").click(runList("horizon,folder", "created", '[["=", "horizon", "new"]]'));
			$("#btnPageToday").click(runList("horizon,folder", "created", '[["=", "horizon", "today"]]'));
			$("#btnPageNext").click(runList("horizon,folder", "created", '[["=", "horizon", "next"]]'));
			$("#btnPageWeek").click(runList("horizon,folder", "created", '[["=", "horizon", "week"]]'));
			$("#btnPageMonth").click(runList("horizon,folder", "created", '[["=", "horizon", "month"]]'));
			$("#btnPageQuarter").click(runList("horizon,folder", "created", '[["=", "horizon", "quarter"]]'));
			$("#btnPageYear").click(runList("horizon,folder", "created", '[["=", "horizon", "year"]]'));
		})

		dialog = $("#dialog-form").dialog({
			autoOpen: false,
			closeOnEscape: true,
			height: "250",
			modal: true,
			buttons: {
				"Close Items": function() {
					doCloseN();
					dialog.dialog("close");
				},
				Cancel: function() {
					dialog.dialog("close");
				}
			},
			close: function() {
				form[0].reset();
			}
		});

		form = dialog.find("form").on("submit", function(e) {
			e.preventDefault();
			doCloseN();
			dialog.dialog("close");
		});

		$(document).bind('keydown.c', function() {
			$("#closeList").val("");
			dialog.dialog("open");
			return false;
		});
	</script>
</body>
